<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>&lt;async-data&gt;: A web component for async data retrieval.</title>
    <!-- web components polyfill -->
    <script src="src/webcomponents.js"></script>
    <!-- import the component -->
    <link rel="import" href="src/async-data.html">
  </head>
  <body>
    <header>
      <h1>&lt;async-data&gt;</h1>
      <h2>A web component for async data retrieval.</h2>
    </header>
    <async-data src="https://api.github.com/users/phoenixstormcrow"></async-data>
    <output id="async-data-output"></output>
    <br>
    <br>
    <form id="form-api">
      <input id="input-api" type="text" placeholder="Enter an api url.">
      <button>Get data</button>
    </form>

    <script>
      window.onload = function() {
        var input = document.querySelector('input'),
            form = document.querySelector('form'),
            output = document.querySelector('output'),
            asyncData = document.querySelector('async-data');

        form.addEventListener('submit', function (event) {
          var api = input.value;
          event.preventDefault();
          if (api === '') {
            event.stopPropagation();
            return;
          }
          asyncData.setAttribute('src', api);
        });

        document.addEventListener('data', function (evt) {
          if (evt.target === asyncData) {
            output.textContent = asyncData.value;
          }
        });
      };
    </script>
  </body>
</html>
